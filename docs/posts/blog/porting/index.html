<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=content-type content="text/html"><meta name=viewport content="width=device-width,initial-scale=1"><title itemprop=name>Porting from Jekyll to Hugo | Jithesh</title>
<meta property="og:title" content="Porting from Jekyll to Hugo | Jithesh"><meta name=twitter:title content="Porting from Jekyll to Hugo | Jithesh"><meta itemprop=name content="Porting from Jekyll to Hugo | Jithesh"><meta name=application-name content="Porting from Jekyll to Hugo | Jithesh"><meta property="og:site_name" content><meta name=description content><meta itemprop=description content><meta property="og:description" content><meta name=twitter:description content><meta property="og:locale" content="en-us"><meta name=language content="en-us"><link rel=alternate hreflang=en-us href=https://jithesh.io/posts/blog/porting/ title=English><meta property="og:type" content="article"><meta property="og:article:published_time" content=2024-09-05T00:00:00Z><meta property="article:published_time" content=2024-09-05T00:00:00Z><meta property="og:url" content="https://jithesh.io/posts/blog/porting/"><meta property="og:article:author" content="Jithesh Chandrasekharan"><meta property="article:author" content="Jithesh Chandrasekharan"><meta name=author content="Jithesh Chandrasekharan"><script defer type=application/ld+json>{"@context":"http://schema.org","@type":"Article","headline":"Porting from Jekyll to Hugo","author":{"@type":"Person","name":""},"datePublished":"2024-09-05","description":"","wordCount":828,"mainEntityOfPage":"True","dateModified":"2024-09-05","image":{"@type":"imageObject","url":""},"publisher":{"@type":"Organization","name":"Jithesh"}}</script><meta name=generator content="Hugo 0.134.0"><meta property="og:url" content="https://jithesh.io/posts/blog/porting/"><meta property="og:site_name" content="Jithesh"><meta property="og:title" content="Porting from Jekyll to Hugo"><meta property="og:description" content="Introduction Migrating blog posts from one platform to another can be a daunting task, especially when you have years of content. In this post, I will walk through how I ported my existing Jekyll blog posts to Hugo by converting Markdown files, extracting images, updating image tags, and replacing Jekyll’s front matter with Hugo-compatible front matter. This process allows for a seamless transition and ensures that all your content is properly formatted in the new environment."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-09-05T00:00:00+00:00"><meta property="article:modified_time" content="2024-09-05T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Porting from Jekyll to Hugo"><meta name=twitter:description content="Introduction Migrating blog posts from one platform to another can be a daunting task, especially when you have years of content. In this post, I will walk through how I ported my existing Jekyll blog posts to Hugo by converting Markdown files, extracting images, updating image tags, and replacing Jekyll’s front matter with Hugo-compatible front matter. This process allows for a seamless transition and ensures that all your content is properly formatted in the new environment."><link rel=canonical href=https://jithesh.io/posts/blog/porting/><link rel=stylesheet href=/css/copy-code.css><script src=/js/copy-code.js></script><link href=/style.min.da54ed9132d4ba2c4d0207a1ff9b3f2dd73aeec7858814832b1bb2bb3d91ba97.css rel=stylesheet><link href=/code-highlight.min.706d31975fec544a864cb7f0d847a73ea55ca1df91bf495fd12a177138d807cf.css rel=stylesheet><link href=/sass/custom.min.2529467044a4f8c090358d22b157be0ed200d5fc1c33839d45644d203b919c57.css rel=stylesheet><link rel=apple-touch-icon sizes=180x180 href=/icons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/icons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/icons/favicon-16x16.png><link rel=mask-icon href=/icons/safari-pinned-tab.svg><link rel="shortcut icon" href=/favicon.ico><link rel=manifest href=https://jithesh.io/site.webmanifest><meta name=msapplication-config content="/browserconfig.xml"><meta name=msapplication-TileColor content="#2d89ef"><meta name=theme-color content="#434648"><link rel=icon type=image/svg+xml href=/icons/favicon.svg></head><body data-theme class=notransition><script src=/js/theme.min.8961c317c5b88b953fe27525839672c9343f1058ab044696ca225656c8ba2ab0.js integrity="sha256-iWHDF8W4i5U/4nUlg5ZyyTQ/EFirBEaWyiJWVsi6KrA="></script><div class=navbar role=navigation><nav class=menu aria-label="Main Navigation"><a href=https://jithesh.io/ class=logo><svg width="25" height="25" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-home"><title>Home</title><path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
</a><input type=checkbox id=menu-trigger class=menu-trigger>
<label for=menu-trigger><span class=menu-icon><svg width="25" height="25" stroke="currentcolor" fill="none" viewBox="0 0 14 14"><title>Menu</title><path stroke-linecap="round" stroke-linejoin="round" d="M10.595 7H3.40726"/><path stroke-linecap="round" stroke-linejoin="round" d="M10.5096 3.51488H3.49301"/><path stroke-linecap="round" stroke-linejoin="round" d="M10.5096 10.4851H3.49301"/><path stroke-linecap="round" stroke-linejoin="round" d="M.5 12.5V1.5c0-.552285.447715-1 1-1h11C13.0523.5 13.5.947715 13.5 1.5v11C13.5 13.0523 13.0523 13.5 12.5 13.5H1.5C.947715 13.5.5 13.0523.5 12.5z"/></svg></span></label><div class=trigger><ul class=trigger-container><li><a class=menu-link href=/>Home</a></li><li><a class="menu-link active" href=/posts/>Posts</a></li><li><a class=menu-link href=/categories/>Tags</a></li><li><a class=menu-link href=/pages/about/>About</a></li><li class=menu-separator><span>|</span></li></ul><a id=mode href=#><svg class="mode-sunny" width="21" height="21" viewBox="0 0 14 14" stroke-width="1"><title>LIGHT</title><g><circle cx="7" cy="7" r="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="7" y1=".5" x2="7" y2="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="2.4" y1="2.4" x2="3.82" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1=".5" y1="7" x2="2.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="2.4" y1="11.6" x2="3.82" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="7" y1="13.5" x2="7" y2="11.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.6" y1="11.6" x2="10.18" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="13.5" y1="7" x2="11.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.6" y1="2.4" x2="10.18" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"/></g></svg><svg class="mode-moon" width="21" height="21" viewBox="0 0 14 14" stroke-width="1"><title>DARK</title><g><circle cx="7" cy="7" r="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="7" y1=".5" x2="7" y2="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="2.4" y1="2.4" x2="3.82" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1=".5" y1="7" x2="2.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="2.4" y1="11.6" x2="3.82" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="7" y1="13.5" x2="7" y2="11.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.6" y1="11.6" x2="10.18" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="13.5" y1="7" x2="11.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.6" y1="2.4" x2="10.18" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"/></g></svg></a></div></nav></div><div class="wrapper post"><main class=page-content aria-label=Content><article><header class=header><h1 class=header-title>Porting from Jekyll to Hugo</h1><div class=post-meta><time datetime=2024-09-05T00:00:00+00:00 itemprop=datePublished>Sep 5, 2024</time></div></header><details class=toc zgotmplz><summary><b>Table of Contents</b></summary><nav id=TableOfContents><ul><li><a href=#introduction>Introduction</a></li><li><a href=#why-migrate-from-jekyll-to-hugo>Why migrate from Jekyll to Hugo?</a></li><li><a href=#extracting-images-from-markdown>Extracting Images from Markdown</a></li><li><a href=#replacing-the-front-matter>Replacing the Front Matter</a></li><li><a href=#structuring-posts-as-leaf-bundles-in-hugo>Structuring Posts as Leaf Bundles in Hugo</a></li><li><a href=#automatic-the-full-process>Automatic the full process</a></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></details><div class=page-content><h2 id=introduction>Introduction</h2><p>Migrating blog posts from one platform to another can be a daunting task, especially when you have years of content. In this post, I will walk through how I ported my existing Jekyll blog posts to Hugo by converting Markdown files, extracting images, updating image tags, and replacing Jekyll&rsquo;s front matter with Hugo-compatible front matter. This process allows for a seamless transition and ensures that all your content is properly formatted in the new environment.</p><img src=jekyl-hugo.webp alt="Hugo Image Example" style=width:50%;height:auto><h2 id=why-migrate-from-jekyll-to-hugo>Why migrate from Jekyll to Hugo?</h2><p>Jekyll and Hugo are both static site generators, but Hugo is known for its speed and flexibility, especially when dealing with large sites. Hugo’s templating system and the ability to use leaf and branch bundles make content organization simple.</p><p>This blog will focus on porting Markdown files, as well as how we used Python to automate the conversion.</p><h2 id=extracting-images-from-markdown>Extracting Images from Markdown</h2><p>Jekyll blog posts often have images embedded in Markdown files using relative paths. When migrating to Hugo, these images need to be extracted and relocated to a consistent directory structure.<br>We wrote a Python script to extract image paths from the Markdown files, copy the images to a new folder, and update the image tags in the Markdown files.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>os</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>re</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>shutil</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>extract_images</span><span class=p>(</span><span class=n>markdown_file</span><span class=p>,</span> <span class=n>root_image_folder</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=c1># Get the base name of the markdown file (without extension)</span>
</span></span><span class=line><span class=cl>    <span class=n>markdown_filename</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>basename</span><span class=p>(</span><span class=n>markdown_file</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>folder_name</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>splitext</span><span class=p>(</span><span class=n>markdown_filename</span><span class=p>)[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Set the destination folder to store extracted images</span>
</span></span><span class=line><span class=cl>    <span class=n>destination_folder</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>getcwd</span><span class=p>(),</span> <span class=n>folder_name</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>os</span><span class=o>.</span><span class=n>makedirs</span><span class=p>(</span><span class=n>destination_folder</span><span class=p>,</span> <span class=n>exist_ok</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Read the markdown file</span>
</span></span><span class=line><span class=cl>    <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=n>markdown_file</span><span class=p>,</span> <span class=s1>&#39;r&#39;</span><span class=p>,</span> <span class=n>encoding</span><span class=o>=</span><span class=s1>&#39;utf-8&#39;</span><span class=p>)</span> <span class=k>as</span> <span class=n>file</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>markdown_content</span> <span class=o>=</span> <span class=n>file</span><span class=o>.</span><span class=n>read</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Regular expression to find both Markdown and HTML image references</span>
</span></span><span class=line><span class=cl>    <span class=n>image_pattern</span> <span class=o>=</span> <span class=sa>r</span><span class=s1>&#39;!\[.*?\]\((.*?)\)|&lt;img.*?src=[&#34;</span><span class=se>\&#39;</span><span class=s1>](.*?)[&#34;</span><span class=se>\&#39;</span><span class=s1>]&#39;</span>
</span></span><span class=line><span class=cl>    <span class=n>image_paths</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>findall</span><span class=p>(</span><span class=n>image_pattern</span><span class=p>,</span> <span class=n>markdown_content</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Copy the images and update image paths in markdown</span>
</span></span><span class=line><span class=cl>    <span class=n>updated_image_paths</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>img</span> <span class=ow>in</span> <span class=n>image_paths</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>image_path</span> <span class=o>=</span> <span class=n>img</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=k>if</span> <span class=n>img</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=k>else</span> <span class=n>img</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=n>full_image_path</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>root_image_folder</span><span class=p>,</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>basename</span><span class=p>(</span><span class=n>image_path</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>exists</span><span class=p>(</span><span class=n>full_image_path</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=n>new_image_path</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>destination_folder</span><span class=p>,</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>basename</span><span class=p>(</span><span class=n>full_image_path</span><span class=p>))</span>
</span></span><span class=line><span class=cl>            <span class=n>shutil</span><span class=o>.</span><span class=n>copy</span><span class=p>(</span><span class=n>full_image_path</span><span class=p>,</span> <span class=n>new_image_path</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>updated_image_paths</span><span class=p>[</span><span class=n>image_path</span><span class=p>]</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>basename</span><span class=p>(</span><span class=n>new_image_path</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Update image paths in the markdown content</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>old_path</span><span class=p>,</span> <span class=n>new_path</span> <span class=ow>in</span> <span class=n>updated_image_paths</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
</span></span><span class=line><span class=cl>        <span class=n>markdown_content</span> <span class=o>=</span> <span class=n>markdown_content</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=n>old_path</span><span class=p>,</span> <span class=n>new_path</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Write the updated markdown content back to file</span>
</span></span><span class=line><span class=cl>    <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=n>markdown_file</span><span class=p>,</span> <span class=s1>&#39;w&#39;</span><span class=p>,</span> <span class=n>encoding</span><span class=o>=</span><span class=s1>&#39;utf-8&#39;</span><span class=p>)</span> <span class=k>as</span> <span class=n>file</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>file</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>markdown_content</span><span class=p>)</span>
</span></span></code></pre></div><p>The script uses regular expressions to find image paths in Markdown files.It copies the images to a new folder and updates the Markdown files to point to the new image paths.</p><h2 id=replacing-the-front-matter>Replacing the Front Matter</h2><p>Jekyll posts use YAML front matter (&mdash;), while Hugo supports TOML (+++) and YAML. Additionally, we need to adjust fields like categories to fit Hugo’s front matter structure. We wrote a Python script to replace Jekyll’s front matter with Hugo-compatible front matter.This script extracts the YAML front matter used by Jekyll and replaces it with Hugo-compatible TOML front matter. The tags field in Jekyll becomes categories in Hugo.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>re</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>yaml</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>replace_front_matter</span><span class=p>(</span><span class=n>markdown_file</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=n>markdown_file</span><span class=p>,</span> <span class=s1>&#39;r&#39;</span><span class=p>,</span> <span class=n>encoding</span><span class=o>=</span><span class=s1>&#39;utf-8&#39;</span><span class=p>)</span> <span class=k>as</span> <span class=n>file</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>markdown_content</span> <span class=o>=</span> <span class=n>file</span><span class=o>.</span><span class=n>read</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Regex to capture front matter in Jekyll</span>
</span></span><span class=line><span class=cl>    <span class=n>front_matter_match</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=k>match</span><span class=p>(</span><span class=sa>r</span><span class=s1>&#39;^---\s*[\n\r]+(.*?)\s*---\s*[\n\r]+&#39;</span><span class=p>,</span> <span class=n>markdown_content</span><span class=p>,</span> <span class=n>re</span><span class=o>.</span><span class=n>DOTALL</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>front_matter_match</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>front_matter_yaml</span> <span class=o>=</span> <span class=n>front_matter_match</span><span class=o>.</span><span class=n>group</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>front_matter</span> <span class=o>=</span> <span class=n>yaml</span><span class=o>.</span><span class=n>safe_load</span><span class=p>(</span><span class=n>front_matter_yaml</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>title</span> <span class=o>=</span> <span class=n>front_matter</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;title&#39;</span><span class=p>,</span> <span class=s1>&#39;Untitled&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>date</span> <span class=o>=</span> <span class=n>front_matter</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;date&#39;</span><span class=p>,</span> <span class=s1>&#39;&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>categories</span> <span class=o>=</span> <span class=n>front_matter</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;tags&#39;</span><span class=p>,</span> <span class=p>[])</span>
</span></span><span class=line><span class=cl>        <span class=c1># Generate Hugo front matter</span>
</span></span><span class=line><span class=cl>        <span class=n>new_front_matter</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;+++</span><span class=se>\n</span><span class=s2>title = &#39;</span><span class=si>{</span><span class=n>title</span><span class=si>}</span><span class=s2>&#39;</span><span class=se>\n</span><span class=s2>date = </span><span class=si>{</span><span class=n>date</span><span class=si>}</span><span class=se>\n</span><span class=s2>categories = </span><span class=si>{</span><span class=n>categories</span><span class=si>}</span><span class=se>\n</span><span class=s2>+++</span><span class=se>\n</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>        <span class=c1># Remove old front matter and replace it with Hugo&#39;s</span>
</span></span><span class=line><span class=cl>        <span class=n>markdown_body</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>sub</span><span class=p>(</span><span class=sa>r</span><span class=s1>&#39;^---\s*[\n\r]+.*?\s*---\s*[\n\r]+&#39;</span><span class=p>,</span> <span class=s1>&#39;&#39;</span><span class=p>,</span> <span class=n>markdown_content</span><span class=p>,</span> <span class=n>flags</span><span class=o>=</span><span class=n>re</span><span class=o>.</span><span class=n>DOTALL</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>updated_markdown</span> <span class=o>=</span> <span class=n>new_front_matter</span> <span class=o>+</span> <span class=n>markdown_body</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1># Write updated markdown</span>
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=n>markdown_file</span><span class=p>,</span> <span class=s1>&#39;w&#39;</span><span class=p>,</span> <span class=n>encoding</span><span class=o>=</span><span class=s1>&#39;utf-8&#39;</span><span class=p>)</span> <span class=k>as</span> <span class=n>file</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>file</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>updated_markdown</span><span class=p>)</span>
</span></span></code></pre></div><h2 id=structuring-posts-as-leaf-bundles-in-hugo>Structuring Posts as Leaf Bundles in Hugo</h2><p>In Hugo, content is structured into leaf bundles (a directory with an index.md file and other resources like images) for better organization of blog post. We need to convert Jekyll posts into leaf bundles.<br>For each Markdown file, we place it into a folder (named after the post) and name the Markdown file index.md to follow Hugo’s leaf bundle structure.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>os</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>shutil</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>create_leaf_bundle</span><span class=p>(</span><span class=n>markdown_file</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=c1># Get the base name of the markdown file (without extension)</span>
</span></span><span class=line><span class=cl>    <span class=n>markdown_filename</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>basename</span><span class=p>(</span><span class=n>markdown_file</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>folder_name</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>splitext</span><span class=p>(</span><span class=n>markdown_filename</span><span class=p>)[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Create a folder for the leaf bundle</span>
</span></span><span class=line><span class=cl>    <span class=n>leaf_bundle_folder</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>getcwd</span><span class=p>(),</span> <span class=n>folder_name</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>os</span><span class=o>.</span><span class=n>makedirs</span><span class=p>(</span><span class=n>leaf_bundle_folder</span><span class=p>,</span> <span class=n>exist_ok</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Move the markdown file into the leaf bundle folder and rename it to index.md</span>
</span></span><span class=line><span class=cl>    <span class=n>new_md_path</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>leaf_bundle_folder</span><span class=p>,</span> <span class=s1>&#39;index.md&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>shutil</span><span class=o>.</span><span class=n>move</span><span class=p>(</span><span class=n>markdown_file</span><span class=p>,</span> <span class=n>new_md_path</span><span class=p>)</span>
</span></span></code></pre></div><p>This script renames each Markdown file to index.md and moves it into a dedicated folder to create a leaf bundle.Hugo will treat each of these folders as a self-contained post, complete with its images.</p><h2 id=automatic-the-full-process>Automatic the full process</h2><p>Here’s the full Python script that combines the image extraction, front matter replacement, and leaf bundle creation processes</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>process_markdown_file</span><span class=p>(</span><span class=n>markdown_file</span><span class=p>,</span> <span class=n>image_folder</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>extract_images</span><span class=p>(</span><span class=n>markdown_file</span><span class=p>,</span> <span class=n>image_folder</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>replace_front_matter</span><span class=p>(</span><span class=n>markdown_file</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>create_leaf_bundle</span><span class=p>(</span><span class=n>markdown_file</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Loop through all markdown files in a folder</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>markdown_file</span> <span class=ow>in</span> <span class=n>os</span><span class=o>.</span><span class=n>listdir</span><span class=p>(</span><span class=s1>&#39;path_to_markdown_files&#39;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>markdown_file</span><span class=o>.</span><span class=n>endswith</span><span class=p>(</span><span class=s2>&#34;.md&#34;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>process_markdown_file</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=s1>&#39;path_to_markdown_files&#39;</span><span class=p>,</span> <span class=n>markdown_file</span><span class=p>),</span> <span class=s1>&#39;path_to_images&#39;</span><span class=p>)</span>
</span></span></code></pre></div><p>This script handles everything: extracting images, replacing front matter, and converting the posts to Hugo-compatible leaf bundles.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>python img_util/md_img.py <span class=s2>&#34;C:/path/to/markdown-folder&#34;</span> <span class=s2>&#34;C:/path/to/images&#34;</span>
</span></span></code></pre></div><h2 id=conclusion>Conclusion</h2><p>Migrating from Jekyll to Hugo can be automated using Python scripts to extract images, update Markdown files, and replace front matter. With these tools, I was able to quickly port my entire blog, maintaining the structure and content integrity. Hugo’s speed and flexible templating system make it a great choice for managing large static sites.</p></div></article></main></div><footer class=footer><span class=footer_item></span>&nbsp;<div class=footer_social-icons><a href=https://github.com/gitjit target=_blank rel="noopener noreferrer me" title=Github><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg>
</a><a href=https://twitter.com/jitbytes target=_blank rel="noopener noreferrer me" title=Twitter><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg>
</a><a href=https://www.linkedin.com/in/jitheshc target=_blank rel="noopener noreferrer me" title=Linkedin><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></svg></a></div><small class=footer_copyright>© 2024 Jithesh Chandrasekharan.</small></footer><script src=https://jithesh.io/js/main.min.4ee188e1744c19816e95a540b2650ed9f033ea0371e74eac8e717355cfca8741.js integrity="sha256-TuGI4XRMGYFulaVAsmUO2fAz6gNx506sjnFzVc/Kh0E="></script></body></html>