<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=content-type content="text/html"><meta name=viewport content="width=device-width,initial-scale=1"><title itemprop=name>.Net Framework Essentials | Jithesh</title>
<meta property="og:title" content=".Net Framework Essentials | Jithesh"><meta name=twitter:title content=".Net Framework Essentials | Jithesh"><meta itemprop=name content=".Net Framework Essentials | Jithesh"><meta name=application-name content=".Net Framework Essentials | Jithesh"><meta property="og:site_name" content><meta name=description content><meta itemprop=description content><meta property="og:description" content><meta name=twitter:description content><meta property="og:locale" content="en-us"><meta name=language content="en-us"><link rel=alternate hreflang=en-us href=https://jithesh.blog/posts/archives/dotnet-framework/ title=English><meta property="og:type" content="article"><meta property="og:article:published_time" content=2011-04-01T00:00:00Z><meta property="article:published_time" content=2011-04-01T00:00:00Z><meta property="og:url" content="https://jithesh.blog/posts/archives/dotnet-framework/"><meta property="og:article:author" content="Jithesh Chandrasekharan"><meta property="article:author" content="Jithesh Chandrasekharan"><meta name=author content="Jithesh Chandrasekharan"><script defer type=application/ld+json>{"@context":"http://schema.org","@type":"Article","headline":".Net Framework Essentials","author":{"@type":"Person","name":""},"datePublished":"2011-04-01","description":"","wordCount":835,"mainEntityOfPage":"True","dateModified":"2011-04-01","image":{"@type":"imageObject","url":""},"publisher":{"@type":"Organization","name":"Jithesh"}}</script><meta name=generator content="Hugo 0.134.0"><meta property="og:url" content="https://jithesh.blog/posts/archives/dotnet-framework/"><meta property="og:site_name" content="Jithesh"><meta property="og:title" content=".Net Framework Essentials"><meta property="og:description" content="When ever we read about .Net Framework, three key terms that we encounter are CLI, CLS and CTS. These are actually standards that defines the .Net Framework. To put it another way the .Net framework is actually one implementation of a spec called as CLI (Common Language Infrastructure). These are some key information you will find in this spec.
This spec defines in detail the operations or features to be supported by the execution engine (EE). File format. What is inside the Managed executable file in the exe or dll ? (Derivative of PE32 spec) Class libraries and classes that must be implemented by implementors of the framework. There is a portion of spec which is commonly referred as CTS (Common Type System). CTS is the part of spec that defines following info. Languages targeting CLR should support CTS."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2011-04-01T00:00:00+00:00"><meta property="article:modified_time" content="2011-04-01T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content=".Net Framework Essentials"><meta name=twitter:description content="When ever we read about .Net Framework, three key terms that we encounter are CLI, CLS and CTS. These are actually standards that defines the .Net Framework. To put it another way the .Net framework is actually one implementation of a spec called as CLI (Common Language Infrastructure). These are some key information you will find in this spec.
This spec defines in detail the operations or features to be supported by the execution engine (EE). File format. What is inside the Managed executable file in the exe or dll ? (Derivative of PE32 spec) Class libraries and classes that must be implemented by implementors of the framework. There is a portion of spec which is commonly referred as CTS (Common Type System). CTS is the part of spec that defines following info. Languages targeting CLR should support CTS."><link rel=canonical href=https://jithesh.blog/posts/archives/dotnet-framework/><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css><link rel=stylesheet href=/css/copy-code.css><script src=/js/copy-code.js></script><link href=/style.min.da54ed9132d4ba2c4d0207a1ff9b3f2dd73aeec7858814832b1bb2bb3d91ba97.css rel=stylesheet><link href=/code-highlight.min.706d31975fec544a864cb7f0d847a73ea55ca1df91bf495fd12a177138d807cf.css rel=stylesheet><link href=/sass/custom.min.cf467393bd3e3fc9a644f66d33a0a37039ba0d42650e5bc986be04542577c0a0.css rel=stylesheet><link rel=apple-touch-icon sizes=180x180 href=/icons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/icons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/icons/favicon-16x16.png><link rel=mask-icon href=/icons/safari-pinned-tab.svg><link rel="shortcut icon" href=/favicon.ico><link rel=manifest href=https://jithesh.blog/site.webmanifest><meta name=msapplication-config content="/browserconfig.xml"><meta name=msapplication-TileColor content="#2d89ef"><meta name=theme-color content="#434648"><link rel=icon type=image/svg+xml href=/icons/favicon.svg></head><body data-theme class=notransition><script src=/js/theme.min.8961c317c5b88b953fe27525839672c9343f1058ab044696ca225656c8ba2ab0.js integrity="sha256-iWHDF8W4i5U/4nUlg5ZyyTQ/EFirBEaWyiJWVsi6KrA="></script><div class=navbar role=navigation><nav class=menu aria-label="Main Navigation"><a href=https://jithesh.blog/ class=logo><svg width="25" height="25" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-home"><title>Home</title><path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
</a><input type=checkbox id=menu-trigger class=menu-trigger>
<label for=menu-trigger><span class=menu-icon><svg width="25" height="25" stroke="currentcolor" fill="none" viewBox="0 0 14 14"><title>Menu</title><path stroke-linecap="round" stroke-linejoin="round" d="M10.595 7H3.40726"/><path stroke-linecap="round" stroke-linejoin="round" d="M10.5096 3.51488H3.49301"/><path stroke-linecap="round" stroke-linejoin="round" d="M10.5096 10.4851H3.49301"/><path stroke-linecap="round" stroke-linejoin="round" d="M.5 12.5V1.5c0-.552285.447715-1 1-1h11C13.0523.5 13.5.947715 13.5 1.5v11C13.5 13.0523 13.0523 13.5 12.5 13.5H1.5C.947715 13.5.5 13.0523.5 12.5z"/></svg></span></label><div class=trigger><ul class=trigger-container><li><a class=menu-link href=/>Home</a></li><li><a class="menu-link active" href=/posts/>Posts</a></li><li><a class=menu-link href=/categories/>Tags</a></li><li><a class=menu-link href=/pages/about/>About</a></li><li class=menu-separator><span>|</span></li></ul><a id=mode href=#><svg class="mode-sunny" width="21" height="21" viewBox="0 0 14 14" stroke-width="1"><title>LIGHT</title><g><circle cx="7" cy="7" r="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="7" y1=".5" x2="7" y2="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="2.4" y1="2.4" x2="3.82" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1=".5" y1="7" x2="2.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="2.4" y1="11.6" x2="3.82" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="7" y1="13.5" x2="7" y2="11.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.6" y1="11.6" x2="10.18" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="13.5" y1="7" x2="11.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.6" y1="2.4" x2="10.18" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"/></g></svg><svg class="mode-moon" width="21" height="21" viewBox="0 0 14 14" stroke-width="1"><title>DARK</title><g><circle cx="7" cy="7" r="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="7" y1=".5" x2="7" y2="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="2.4" y1="2.4" x2="3.82" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1=".5" y1="7" x2="2.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="2.4" y1="11.6" x2="3.82" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="7" y1="13.5" x2="7" y2="11.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.6" y1="11.6" x2="10.18" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="13.5" y1="7" x2="11.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.6" y1="2.4" x2="10.18" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"/></g></svg></a></div></nav></div><div class="wrapper post"><main class=page-content aria-label=Content><article><header class=header><h1 class=header-title>.Net Framework Essentials</h1><div class=post-meta><time datetime=2011-04-01T00:00:00+00:00 itemprop=datePublished>Apr 1, 2011</time></div></header><div class=page-content><p>When ever we read about .Net Framework, three key terms that we encounter are CLI, CLS and CTS. These are actually standards that defines the .Net Framework. To put it another way the .Net framework is actually one implementation of a spec called as <strong>CLI</strong> (Common Language Infrastructure). These are some key information you will find in this spec.</p><ul><li>This spec defines in detail the operations or features to be supported by the execution engine (EE).</li><li>File format. What is inside the Managed executable file in the exe or dll ? (Derivative of PE32 spec)</li><li>Class libraries and classes that must be implemented by implementors of the framework.</li></ul><p>There is a portion of spec which is commonly referred as <strong>CTS</strong> (Common Type System). CTS is the part of spec that defines following info. Languages targeting CLR should support CTS.</p><ul><li>Actual Instruction set supported by the execution Engine.</li><li>Types to be implemented as part of Execution engine. (string, integer, etc.)</li></ul><p>There is a third portion of spec referred as <strong>CLS</strong> (Common Language Specification). This specify minimum set of types that should be included as part of the Run time. In developer perspective this is the minimum set of features just about you can count on to always exist in all variation of the CLI (Desktop CLR, Mono, Phone CLR etc..). So its
advertising developers that these features will be built in available on wide variety of CLI implementation.</p><img src=cli.png class=img-responsive><p>There are various CLI implementations and following are popular one&rsquo;s</p><ul><li>Microsoft .NET Framework (CLR) retail platform for Windows Desktops.</li><li>Microsoft .NET Compact Framework (CF) targets pda&rsquo;s, smart phones</li><li>Mono targets Linux, Mac (By Ximian)</li></ul><h4 id=language-support>Language Support</h4><p>Programming languages targeting .Net framework should adhere to CTS specification. Languages do not have to support 100% of the CTS. Each languages can chose a different subset of CTS to support. Also languages does not have to limit themselves to CTS. For example CTS spec described in CLI does not support Multiple Inheritance. But a language like C++ supports Multiple Inheritance.So thats where idea of CLS spec in CLI which
specifies minimum set of features language targeting this framework should support, so that developers targeting this framework can count on.</p><img src=lang-cli.png class=img-responsive><h4 id=clr-execution>CLR Execution</h4><p>As described earlier, CLR is the Microsoft&rsquo;s implementation of CLI or in general called as .Net Framework. Now we will get deep into how our source code gets executed by CLR. Source Code gets compiled into an Assembly (DLL or EXE by a <strong>compiler</strong>. The compiler packages your application into an Assembly which contains</p><ul><li>IL (Intermediate Language) format of your source code</li><li>Metadata regarding your types (like access level of class, inheritance level, external class used etc..)</li><li>PE specification, where the PE header is referred by the Windows Operating System to run the executable.</li></ul><p>IL or Intermediate code is instructions targeting a Virtual machine used by execution engine. So all IL instructions will be instructions targeting registers defined in Virtual Machine and all.</p><pre class=line-numbers><code class=language-csharp>
    stfd int32 Point::Y
    ldc.i4 0xc8
</code></pre><p>The above instructions are targeting the virtual machine.So now when you double click or run the executable, Windows will refer the PE headers and based on the type of assembly it create a process address space for executing this assembly. Then Windows maps the image of executable you run into that address space.Then it starts a thread to start the execution. The entry point where the thread starts execution is defined in one of the PE headers in the executable file. This is defined by the Compiler and usually the initial set of instructions will be to load or bootstrap the CLR. Its this instruction that checks the operating system version, installed.Net version and read settings defined by developer and decides to load which version of CLR to be loaded into the address space.</p><p>So once the CLR get loaded, it will creates its execution environment like heap, thread
pools and then starts loading your assembly into the address space. IL is not a processor specific code. So its the process called JIT compilation that converts the IL code to X86 code (processor specific). CLR will start this JIT compilation from the entry point code specified in the assembly (usually main)and switch control of main thread to start executing this x86 instruction. Over the course of this execution, main method might be calling other methods and they are also JIT compiled to x86 instruction and allocate fields into heap etc. This will cascade till the main() exits.</p><p>At this moment our code will be executing under supervisory control of CLR and working in a restrictive environment. CLR also starts other runtime services like GC(Garbage Collection), Security (CAS), reflection etc which controls our execution environment.</p><img src=execution.png class=img-responsive><p>You can view the IL code of an assembly using tools like ILDASM or Red Gate Reflector. Reflector even decompile the IL and shows the source code that may have been used. This helps us to learn more about third party codes to learn more about its implementation.</p><img src=reflector.png class=img-responsive><h4 id=jit-compilation>JIT Compilation</h4><p>Figure below shows a sample JIT Compilation process.</p><img src=jit.png class=img-responsive></div></article></main></div><footer class=footer><span class=footer_item></span>&nbsp;<div class=footer_social-icons><a href=https://github.com/gitjit target=_blank rel="noopener noreferrer me" title=Github><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg>
</a><a href=https://twitter.com/jitbytes target=_blank rel="noopener noreferrer me" title=Twitter><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg>
</a><a href=https://www.linkedin.com/in/jitheshc target=_blank rel="noopener noreferrer me" title=Linkedin><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></svg></a></div><small class=footer_copyright>© 2024 Jithesh Chandrasekharan.</small></footer><script src=https://jithesh.blog/js/main.min.4ee188e1744c19816e95a540b2650ed9f033ea0371e74eac8e717355cfca8741.js integrity="sha256-TuGI4XRMGYFulaVAsmUO2fAz6gNx506sjnFzVc/Kh0E="></script></body></html>