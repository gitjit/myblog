<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=content-type content="text/html"><meta name=viewport content="width=device-width,initial-scale=1"><title itemprop=name>Python : Packaging | Jithesh</title>
<meta property="og:title" content="Python : Packaging | Jithesh"><meta name=twitter:title content="Python : Packaging | Jithesh"><meta itemprop=name content="Python : Packaging | Jithesh"><meta name=application-name content="Python : Packaging | Jithesh"><meta property="og:site_name" content><meta name=description content><meta itemprop=description content><meta property="og:description" content><meta name=twitter:description content><meta property="og:locale" content="en-us"><meta name=language content="en-us"><link rel=alternate hreflang=en-us href=https://jithesh.blog/posts/archives/packaging/ title=English><meta property="og:type" content="article"><meta property="og:article:published_time" content=2011-04-08T00:00:00Z><meta property="article:published_time" content=2011-04-08T00:00:00Z><meta property="og:url" content="https://jithesh.blog/posts/archives/packaging/"><meta property="og:article:author" content="Jithesh Chandrasekharan"><meta property="article:author" content="Jithesh Chandrasekharan"><meta name=author content="Jithesh Chandrasekharan"><script defer type=application/ld+json>{"@context":"http://schema.org","@type":"Article","headline":"Python : Packaging","author":{"@type":"Person","name":""},"datePublished":"2011-04-08","description":"","wordCount":538,"mainEntityOfPage":"True","dateModified":"2011-04-08","image":{"@type":"imageObject","url":""},"publisher":{"@type":"Organization","name":"Jithesh"}}</script><meta name=generator content="Hugo 0.134.0"><meta property="og:url" content="https://jithesh.blog/posts/archives/packaging/"><meta property="og:site_name" content="Jithesh"><meta property="og:title" content="Python : Packaging"><meta property="og:description" content="This post explains how python packaging works and shows how simple it is organise modules as packages. Python’s approach of packaging is much neater and simpler than most of other programming languages where Class Path is important. This post will provide necessary basics about how packaging works in Python.
Any file with extension .py is a module and any folder that contains multiple modules is called a python package."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2011-04-08T00:00:00+00:00"><meta property="article:modified_time" content="2011-04-08T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Python : Packaging"><meta name=twitter:description content="This post explains how python packaging works and shows how simple it is organise modules as packages. Python’s approach of packaging is much neater and simpler than most of other programming languages where Class Path is important. This post will provide necessary basics about how packaging works in Python.
Any file with extension .py is a module and any folder that contains multiple modules is called a python package."><link rel=canonical href=https://jithesh.blog/posts/archives/packaging/><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css><link rel=stylesheet href=/css/copy-code.css><script src=/js/copy-code.js></script><link href=/style.min.da54ed9132d4ba2c4d0207a1ff9b3f2dd73aeec7858814832b1bb2bb3d91ba97.css rel=stylesheet><link href=/code-highlight.min.706d31975fec544a864cb7f0d847a73ea55ca1df91bf495fd12a177138d807cf.css rel=stylesheet><link href=/sass/custom.min.cf467393bd3e3fc9a644f66d33a0a37039ba0d42650e5bc986be04542577c0a0.css rel=stylesheet><link rel=apple-touch-icon sizes=180x180 href=/icons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/icons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/icons/favicon-16x16.png><link rel=mask-icon href=/icons/safari-pinned-tab.svg><link rel="shortcut icon" href=/favicon.ico><link rel=manifest href=https://jithesh.blog/site.webmanifest><meta name=msapplication-config content="/browserconfig.xml"><meta name=msapplication-TileColor content="#2d89ef"><meta name=theme-color content="#434648"><link rel=icon type=image/svg+xml href=/icons/favicon.svg></head><body data-theme class=notransition><script src=/js/theme.min.8961c317c5b88b953fe27525839672c9343f1058ab044696ca225656c8ba2ab0.js integrity="sha256-iWHDF8W4i5U/4nUlg5ZyyTQ/EFirBEaWyiJWVsi6KrA="></script><div class=navbar role=navigation><nav class=menu aria-label="Main Navigation"><a href=https://jithesh.blog/ class=logo><svg width="25" height="25" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-home"><title>Home</title><path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
</a><input type=checkbox id=menu-trigger class=menu-trigger>
<label for=menu-trigger><span class=menu-icon><svg width="25" height="25" stroke="currentcolor" fill="none" viewBox="0 0 14 14"><title>Menu</title><path stroke-linecap="round" stroke-linejoin="round" d="M10.595 7H3.40726"/><path stroke-linecap="round" stroke-linejoin="round" d="M10.5096 3.51488H3.49301"/><path stroke-linecap="round" stroke-linejoin="round" d="M10.5096 10.4851H3.49301"/><path stroke-linecap="round" stroke-linejoin="round" d="M.5 12.5V1.5c0-.552285.447715-1 1-1h11C13.0523.5 13.5.947715 13.5 1.5v11C13.5 13.0523 13.0523 13.5 12.5 13.5H1.5C.947715 13.5.5 13.0523.5 12.5z"/></svg></span></label><div class=trigger><ul class=trigger-container><li><a class=menu-link href=/>Home</a></li><li><a class="menu-link active" href=/posts/>Posts</a></li><li><a class=menu-link href=/categories/>Tags</a></li><li><a class=menu-link href=/pages/about/>About</a></li><li class=menu-separator><span>|</span></li></ul><a id=mode href=#><svg class="mode-sunny" width="21" height="21" viewBox="0 0 14 14" stroke-width="1"><title>LIGHT</title><g><circle cx="7" cy="7" r="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="7" y1=".5" x2="7" y2="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="2.4" y1="2.4" x2="3.82" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1=".5" y1="7" x2="2.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="2.4" y1="11.6" x2="3.82" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="7" y1="13.5" x2="7" y2="11.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.6" y1="11.6" x2="10.18" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="13.5" y1="7" x2="11.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.6" y1="2.4" x2="10.18" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"/></g></svg><svg class="mode-moon" width="21" height="21" viewBox="0 0 14 14" stroke-width="1"><title>DARK</title><g><circle cx="7" cy="7" r="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="7" y1=".5" x2="7" y2="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="2.4" y1="2.4" x2="3.82" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1=".5" y1="7" x2="2.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="2.4" y1="11.6" x2="3.82" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="7" y1="13.5" x2="7" y2="11.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.6" y1="11.6" x2="10.18" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="13.5" y1="7" x2="11.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.6" y1="2.4" x2="10.18" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"/></g></svg></a></div></nav></div><div class="wrapper post"><main class=page-content aria-label=Content><article><header class=header><h1 class=header-title>Python : Packaging</h1><div class=post-meta><time datetime=2011-04-08T00:00:00+00:00 itemprop=datePublished>Apr 8, 2011</time></div></header><div class=page-content><p>This post explains how python packaging works and shows how simple it is organise modules
as packages. Python&rsquo;s approach of packaging is much neater and simpler than most of other programming
languages where Class Path is important. This post will provide necessary basics about how packaging
works in Python.</p><p>Any file with extension <code>.py</code> is a module and any folder that contains multiple modules is called a
python package.</p><p>In our previous <a href=http://jmedium.com/csv-data-analysis/>post</a> we created two handy modules (<code>csvreader.py and portfolio.py</code>)
which can be packaged for reuse. With out packaging and using it as a top level module is a risk on bigger projects as it can create
name conflicts. So let us make these modules as part of a package called &ldquo;stocker&rdquo;.</p><p>As a first step of packaging let us create a new folder called &ldquo;stocker&rdquo;, it will be our package
name. Let us copy <code>csvreader.py and portfolio.py</code> into this folder. In addition we need to create a
file <code>__init__.py</code> inside the folder to mark it as a package.</p><img src=2017-04-21-16-58-26.png class=img-responsive><p>Now let us try to access this package from another file <code>program.py </code>.</p><p>Let us start with <code>csvreader</code></p><pre class=line-numbers>
<code class=language-python>

#program.py

import stocker.csvreader
print(stocker.csvreader.read_csv('stocks\stocks.csv',[str,str,int,float]))

</code>
</pre><p>output..</p><p><code>[{'Shares': 100, 'Date': '7/11/2007', 'Name': 'HPQ', 'Price': 32.2},
{'Shares': 50, 'Date': '7/12/2007', 'Name': 'IBM', 'Price': 91.9},
{'Shares': 150, 'Date': '7/13/2007', 'Name': 'GE', 'Price': 83.44},
{'Shares': 200, 'Date': '7/14/2007', ...</code></p><p>So it worked well !</p><p>Now let us try to use portfolio module to calculate top valued stock as shown below. Remember that
portfolio.csv internally imports csvreader which is also part of this package.</p><img src=2017-04-21-12-42-16.png class=img-responsive><pre class=line-numbers>
<code class=language-python>

#program.py

import stocker.csvreader
import stocker.portfolio # this fails
print(stocker.csvreader.read_csv('stocks\stocks.csv',[str,str,int,float]))

</code>
</pre><p>output..<br><code>import csvreader
ImportError: No module named 'csvreader'</code></p><p>The issue happening here is, Python when importing portfolio is looking to load csvreader. Python
consider&rsquo;s csvreader as a toplevel module and looks for it in toplevel module path and fails. In
order to solve this we have to specify from where to import csvreader. It can be resolved by updating
import statement of csvreader in porfolio.py as follows..</p><p><code>from . import csvreader</code></p><pre class=line-numbers>
<code class=language-python>
# portfolio.py
import glob
import os
import csv
import json
import pprint
import requests
import itertools
from . import csvreader

def get_portfolio_as_dict(path):
    pattern = '*.csv'
    files = glob.glob(os.path.join(path,pattern))
    portfolios = []
    for file in files:
        for row in csvreader.read_csv(file,[str, str, int, float]):
            portfolios.append(row)
    return portfolios

</code>
</pre><p>This is an important step to be taken when creating packages. Another advantage of using &lsquo;.&rsquo; is that
it is not tied to the package name. So even if package name changed it should work well. ! Now let us
dwell into another file we created <code>__init__.py</code>.</p><p><code>__init__.py</code> is called as package initializer and it gets executed before loading any modules in the
package. So we can use <code>__init__.py</code> to do some initialization before any other modules in package
gets loaded. It is widely used to lift symbols from submodules up a level and abstract the implementation
details. So in our <code>__init__.py</code> let us lift symbols in modules in package as follows.</p><pre class=line-numbers>
<code class=language-python>
# __init__.py
from .csvreader import read_csv
from .portfolio import get_top_portfolio
</code>
</pre><p>Now we can import the package and use <code>read_csv and get_top_portfolio</code> as shown below. So we can abstract
our core API&rsquo;s behind the package name.</p><pre class=line-numbers>
<code class=language-python>
# program.py

import stocker
print(stocker.read_csv('stocks\stocks.csv',[str,str,int,float]))

print(stocker.get_top_portfolio('stocks'))

</code>
</pre><p><em>Coding is fun enjoy&mldr;</em></p></div></article></main></div><footer class=footer><span class=footer_item></span>&nbsp;<div class=footer_social-icons><a href=https://github.com/gitjit target=_blank rel="noopener noreferrer me" title=Github><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg>
</a><a href=https://twitter.com/jitbytes target=_blank rel="noopener noreferrer me" title=Twitter><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg>
</a><a href=https://www.linkedin.com/in/jitheshc target=_blank rel="noopener noreferrer me" title=Linkedin><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></svg></a></div><small class=footer_copyright>© 2024 Jithesh Chandrasekharan.</small></footer><script src=https://jithesh.blog/js/main.min.4ee188e1744c19816e95a540b2650ed9f033ea0371e74eac8e717355cfca8741.js integrity="sha256-TuGI4XRMGYFulaVAsmUO2fAz6gNx506sjnFzVc/Kh0E="></script></body></html>